<!DOCTYPE html><html><head><title>Big Picture with vnstat | Brian Shumate</title><meta charset="utf-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="apple-touch-icon-precomposed" sizes="57x57" href="/img/apple-touch-icon-57x57.png"><link rel="apple-touch-icon-precomposed" sizes="114x114" href="/img/apple-touch-icon-114x114.png"><link rel="apple-touch-icon-precomposed" sizes="72x72" href="/img/apple-touch-icon-72x72.png"><link rel="apple-touch-icon-precomposed" sizes="144x144" href="/img/apple-touch-icon-144x144.png"><link rel="apple-touch-icon-precomposed" sizes="60x60" href="/img/apple-touch-icon-60x60.png"><link rel="apple-touch-icon-precomposed" sizes="120x120" href="/img/apple-touch-icon-120x120.png"><link rel="apple-touch-icon-precomposed" sizes="76x76" href="/img/apple-touch-icon-76x76.png"><link rel="apple-touch-icon-precomposed" sizes="152x152" href="/img/apple-touch-icon-152x152.png"><link rel="icon" type="image/png" href="/img/favicon-196x196.png" sizes="196x196"><link rel="icon" type="image/png" href="/img/favicon-96x96.png" sizes="96x96"><link rel="icon" type="image/png" href="/img/favicon-32x32.png" sizes="32x32"><link rel="icon" type="image/png" href="/img/favicon-16x16.png" sizes="16x16"><link rel="icon" type="image/png" href="/img/favicon-128.png" sizes="128x128"><meta name="application-name" content="Brian Shumate"><meta name="msapplication-TileColor" content="#F5AB35"><meta name="msapplication-TileImage" content="/img/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="/img/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="/img/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="/img/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="/img/mstile-310x310.png"><link rel="stylesheet" href="/css/site.css"><script src="//use.edgefonts.net/orbitron.js"></script></head><body><header><div class="top-bar"><div class="top-bar-left"><ul class="menu"><li class="menu-text"><a href="/"><img src="/img/brand.svg" width="24" height="24" class="svg-inject brand-all"><span>Brian </span><span>Shumate</span></a></li></ul></div><div class="top-bar-right"><ul class="menu"><li><a href="/about/">About</a></li><li><a href="/articles/">Articles</a></li><li><a href="/now/">Now</a></li><li><a href="/projects/">Projects</a></li></ul></div></div></header><div id="article-layout-main"><div class="row medium-8 large-7 columns"><article id="article"><br><div class="secondary callout"><h5 id="article-meta"><a class="heading-anchor" href="#article-meta"><span></span></a>Article Meta</h5><span class="byline"><i class="fi-calendar">&#xA0;&#xA0;Published on October 2nd, 2010</i></span><br><span class="article-stats"><i class="fi-page">&#xA0;&#xA0;404 words</i></span><br><span class="article-stats"> <i class="fi-clock">&#xA0;&#xA0;Reading time 2 min</i></span></div><hr><h1 id="big-picture-with-vnstat"><a class="heading-anchor" href="#big-picture-with-vnstat"><span></span></a>Big Picture with vnstat</h1><div><p>A co-located box on fat pipes will put pounds on you.</p>
<!--more-->
<p><img src="/articles/big-picture-with-vnstat/switches.jpg" alt=""></p>
<p>If you manage servers and need to provide some degree of reporting on
network usage by those servers in a high level way (e.g. GBs of traffic 
passed through interface <em>foo</em>? last month), then you should
check out <a href="http://humdi.net/vnstat/"><code>vnstat</code></a>.</p>
<p>For a Debian-ish Linux system, you might do something like this to get
it installed:</p>
<pre><code class="lang-shell">sudo apt-get install vnstat
</code></pre>
<p>This will install <code>vnstat</code> and place a <code>cron</code> script in <code>/etc/cron.d</code>
setting up <code>vnstat</code> that&apos;s executed every five minutes for the majority
of each hour.</p>
<p>After <code>vnstat</code> has had some time to collect statistics, you can access
them at the command line. Here are a some examples from the server that
manages my collection of news trends on a multitude of topics:</p>
<h4 id="show-usage-for-today-and-yesterday-on-all-interfaces"><a class="heading-anchor" href="#show-usage-for-today-and-yesterday-on-all-interfaces"><span></span></a>Show usage for today and yesterday on all interfaces</h4>
<pre><code class="lang-shell">vnstat

                     rx      /     tx      /    total    /  estimated
 eth0:
     yesterday      9.46 MB  /  205.37 MB  /  214.83 MB
         today      1.69 MB  /   62.77 MB  /   64.46 MB  /    1.12 GB

 eth1:
     yesterday     53.30 MB  /  459.31 MB  /  512.61 MB
         today      2.59 MB  /   37.22 MB  /   39.80 MB  /     710 MB
</code></pre>
<h4 id="show-usage-for-all-months-on-the-primary-interface"><a class="heading-anchor" href="#show-usage-for-all-months-on-the-primary-interface"><span></span></a>Show usage for all months on the primary interface</h4>
<pre><code class="lang-shell">vnstat -m

eth0  /  monthly

  month         rx      |      tx      |   total
------------------------+--------------+------------------------------------
 Jun &apos;10     358.13 MB  |     8.61 GB  |     8.96 GB   %::::::::::::::::
 Jul &apos;10     294.29 MB  |     5.27 GB  |     5.56 GB   %:::::::::
 Aug &apos;10     289.47 MB  |     6.31 GB  |     6.59 GB   %:::::::::::
 Sep &apos;10     308.96 MB  |     6.25 GB  |     6.55 GB   %:::::::::::
 Oct &apos;10      25.25 MB  |   697.73 MB  |   722.98 MB   :
------------------------+--------------+------------------------------------
estimated       379 MB  |    10.33 GB  |    10.71 GB
</code></pre>
<h4 id="show-weekly-usage-on-the-primary-interface"><a class="heading-anchor" href="#show-weekly-usage-on-the-primary-interface"><span></span></a>Show weekly usage on the primary interface</h4>
<pre><code class="lang-shell">vnstat -w

eth0  /  weekly

                    rx      |       tx      |    total
----------------------------+---------------+--------------
  last 7 days     64.96 MB  |      1.49 GB  |      1.55 GB
    last week     69.49 MB  |      1.43 GB  |      1.50 GB
 current week     64.96 MB  |      1.49 GB  |      1.55 GB
----------------------------+---------------+--------------
    estimated        74 MB  |      1.72 GB  |      1.79 GB
</code></pre>
<p>There is considerably more traffic generated from people consuming the
processed news trends from our front end web interface (tx) than there is
coming in from user uploads (rx) which is expected for this particular
application.</p>
<p>You can use other command options to get top 10 days in a range, do PNG
graphic output, and more.</p>
<p>As always, read the fancy manual (RTFM) page for more possibilities.</p>
</div><hr></article></div></div></body><footer><div class="row expanded callout secondary"><div class="large-4 columns"><h5 id="-photographie"><a class="heading-anchor" href="#-photographie"><span></span></a><i class="fi-camera"> </i>PHOTOGRAPHIE</h5><div class="row small-up-4"><div class="column"><a href="https://500px.com/photo/128380667/the-mist-by-brian-shumate"><img src="/img/500px/stock-photo-128380667.jpg" alt="500px thumbnail" class="thumbnail"></a></div><div class="column"><a href="https://500px.com/photo/92822883/orb-by-brian-shumate"><img src="/img/500px/stock-photo-128380669.jpg" alt="500px thumbnail" class="thumbnail"></a></div><div class="column"><a href="https://500px.com/photo/128380671/bee-by-brian-shumate"><img src="/img/500px/stock-photo-128380671.jpg" alt="500px thumbnail" class="thumbnail"></a></div><div class="column"><a href="https://500px.com/photo/128380673/cicada-by-brian-shumate"><img src="/img/500px/stock-photo-128380673.jpg" alt="500px thumbnail" class="thumbnail"></a></div><div class="column"><a href="https://500px.com/photo/128380675/butterfly-by-brian-shumate"><img src="/img/500px/stock-photo-128380675.jpg" alt="500px thumbnail" class="thumbnail"></a></div><div class="column"><a href="https://500px.com/photo/128380677/foggy-fall-by-brian-shumate"><img src="/img/500px/stock-photo-128380677.jpg" alt="500px thumbnail" class="thumbnail"></a></div><div class="column"><a href="https://500px.com/photo/128380679/old-homestead-by-brian-shumate"><img src="/img/500px/stock-photo-128380679.jpg" alt="500px thumbnail" class="thumbnail"></a></div><div class="column"><a href="https://500px.com/photo/128380695/foggy-morning-by-brian-shumate"><img src="/img/500px/stock-photo-128380695.jpg" alt="500px thumbnail" class="thumbnail"></a></div></div></div><div class="large-4 columns"><h5 id="-choses-sociales-"><a class="heading-anchor" href="#-choses-sociales-"><span></span></a><i class="fi-at-sign"> </i>CHOSES SOCIALES<br><a href="https://twitter.com/brianshumate" title="Brian Shumate on Twitter"><i class="fi-social-twitter size-60"> </i></a><a href="https://github.com/brianshumate" title="Brian Shumate on GitHub"><i class="fi-social-github size-60"> </i></a><a href="https://500px.com/brianshumate" title="Brian Shumate on 500px"><i class="fi-social-500px size-60"> </i></a><a href="https://keybase.io/brianshumate" title="Brian Shumate on Keybase.io"><i class="fi-key size-60"> </i></a></h5></div><div class="large-4 columns"><h5 id="-de-la-fort"><a class="heading-anchor" href="#-de-la-fort"><span></span></a><i class="fi-trees"> </i>DE LA FOR&#xCA;T</h5><div id="hdt-quote" class="callout"><bloqckquote class="jsgood"><p>&#x201C;We must walk consciously only part way toward our goal, and then leap in the dark to our success.&#x201D;<br><br>&#x2014;Henry David Thoreau</p></bloqckquote><noscript><bloqckquote><p>&#x201C;We must walk consciously only part way toward our goal, and then leap in the dark to our success.&#x201D;<br><br>&#x2014;Henry David Thoreau</p></bloqckquote></noscript><p></p></div></div></div><div class="row expanded"><div class="medium-6 columns"><ul class="menu"><li><a href="/about/">About</a></li><li><a data-open="disclaimerModal">Disclaimer</a></li><li><a href="/license/">License</a></li></ul></div><div class="medium-6 columns"><ul class="menu align-right"><li class="menu-text">Copyright &#xA9; 2015 Brian Shumate</li></ul></div></div></footer><div id="disclaimerModal" data-reveal="" class="large reveal"><h1 id="disclaimer"><a class="heading-anchor" href="#disclaimer"><span></span></a>DISCLAIMER</h1><p class="lead">This is a personal website comprised of personally held opinions. All content provided on this website is for informational purposes only. Brian Shumate makes no representations as to accuracy, completeness, suitability, or validity of any information on this website and will not be liable for any errors, omissions, or delays in this information or any losses, injuries, or damages arising from its display or use. All information is provided on an as-is basis. Terms are subject to change at any time and without notice.</p><button data-close="" aria-label="Close reveal" type="button" class="close-button"><span aria-hidden="true">&#xD7;</span></button></div><script src="/js/jquery-2.1.4.min.js"></script><script src="/js/foundation.min.js"></script><script src="/js/prism.js"></script><script src="/js/app.js"></script><script src="//static.getclicky.com/js" type="text/javascript"></script><script type="text/javascript">try{ clicky.init(100614799); }catch(e){}</script><noscript><p><img alt="Clicky" width="1" height="1" src="//in.getclicky.com/100614799ns.gif"></p></noscript></html>